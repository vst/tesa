<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <!-- ASSETS -->
    <template id="assets_backend" name="tesa assets" inherit_id="web.assets_backend">
      <xpath expr="." position="inside">
        <link rel="stylesheet" href="/tesa/static/src/css/tesa.css"/>
        <script type="text/javascript" src="/tesa/static/src/js/ext/handlebars-v2.0.0.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/ext/jquery.hotkeys.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/ext/numeral.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/utils.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/uservoice.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/handlebar_helpers.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/cart.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/search.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/lib/multiplesearch.js"></script>
        <script type="text/javascript" src="/tesa/static/src/js/tesa.js"></script>
      </xpath>
    </template>

    <!-- CHANGE COMPANY HEADER -->
    <template id="external_layout_header" inherit_id="report.external_layout_header">
      <xpath expr="//div[@class='header']" position="replace">
        <div class="header">
          <div class="row">
            <div class="col-xs-3">
              <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 45px;"/>
            </div>
            <div class="col-xs-9 text-right" style="margin-top:20px;" t-field="company.rml_header1"/>
          </div>
        </div>
      </xpath>
    </template>

    <!-- CHANGE COMPANY FOOTER -->
    <template id="external_layout_footer" inherit_id="report.external_layout_footer">
      <xpath expr="//div[@class='footer']" position="replace">
        <div class="footer small">
          <div class="text-center" style="border-top: 1px solid black;">
            <div class="row">
              <div class="col-md-12">
                <ul t-if="not company.custom_footer" class="list-inline">
                  <li t-if="company.phone">Phone: <span t-field="company.phone"/></li>

                  <li t-if="company.fax and company.phone">&amp;bull;</li>
                  <li t-if="company.fax">Fax: <span t-field="company.fax"/></li>

                  <li t-if="company.email">&amp;bull;</li>
                  <li t-if="company.email">Email: <span t-field="company.email"/></li>

                  <li t-if="company.website">&amp;bull;</li>
                  <li t-if="company.website">Website: <span t-field="company.website"/></li>
                </ul>

                <t t-if="company.custom_footer">
                  <span t-raw="company.rml_footer"/>
                </t>

                <ul class="list-inline">
                  <li>Page:</li>
                  <li><span class="page"/></li>
                  <li>/</li>
                  <li><span class="topage"/></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </xpath>
    </template>

    <template id="web_layout" name="web_layout" inherit_id="web.webclient_bootstrap">
      <xpath expr="//t/div/table" position="after">

        <div id="tesaShowCartDialog" class="modal fade">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h4>Existing Items in the Cart</h4>
              </div>
              <div class="modal-body" id="tesaShowCartContainer"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div id="tesaProductSearchDialog" class="modal fade">
          <div class="modal-dialog modal-lg" style="width:95%;min-width:900px;">
            <div class="modal-content">
              <div class="modal-header bg-info">
                <span class="oe_form_field">
                  <button id="tesaProductSearchButton" style="float: right;">Search</button>
                  <label for="teseProductSearchKeyword" style="float: left;">Product Code:</label>
                  <span style="overflow: hidden;display: block;padding: 0 4px 0 10px;"><input type="text" id="teseProductSearchKeyword" style="width:100%" onkeydown="if (event.keyCode == 13) document.getElementById('tesaProductSearchButton').click()" /></span>
                </span>
              </div>
              <div class="modal-body" id="tesaProductSearchResultContainer"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div id="tesaMultipleProductSearchDialog" class="modal fade">
          <div class="modal-dialog modal-lg" style="width:95%;min-width:900px;">
            <div class="modal-content">
              <div class="modal-header bg-info clearfix">
                <div><textarea id="teseMultipleProductSearchKeyword" style="width:100%" rows="12"></textarea></div>
                <div>
                  <button id="tesaMultipleProductSearchClearButton" onclick="clearMultipleSearchResults()">Search Clear</button>
                  <button id="tesaMultipleProductSearchButton">Search</button>
                </div>
              </div>
              <div class="modal-body" id="tesaMultipleProductSearchResultContainer"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <div id="tesaProductAddToCartDialog" class="modal fade">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body" id="tesaProductAddToCartContainer"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script id="tesaCartTemplate" type="text/x-handlebars-template">
          <div class="row">
            <div class="col-md-8">
              <table class="table table-condensed table-bordered">
                <tr>
                  <th>Code</th>
                  <th>Name</th>
                  <th style="text-align:right;">Price</th>
                  <th style="text-align:right;">Quantity</th>
                  <th style="text-align:center;">Tag</th>
                  <th></th>
                </tr>
                {{#each .}}
                <tr>
                  <td>{{code}}</td>
                  <td>{{name}}</td>
                  <td style="text-align:right;">{{price}}</td>
                  <td style="text-align:right;">{{qty}}</td>
                  <td style="text-align:center;">{{tag}}</td>
                  <td><input type="checkbox" class="tesa-cart-item" value="{{cartsel id price qty name uid}}" name="{{uid}}"/></td>
                </tr>
                {{/each}}
              </table>
            </div>
            <div class="col-md-4">
              <a href="javascript:createNewSalesOrder()" class="btn btn-primary btn-sm">Create New Sales Quotation</a>
            </div>
          </div>
        </script>

        <script id="tesaProductAddToCartTemplate" type="text/x-handlebars-template">
          <div class="row">
            <div class="col-md-6">
              <table class="table">
                <tr><td>Code</td><td>{{default_code}}</td></tr>
                <tr><td>Name</td><td><a href="/web?#id={{id}}&amp;view_type=form&amp;model=product.product&amp;action=135" target="_blank">{{name}}</a></td></tr>
                <tr><td>Brand</td><td>{{lookup brand 1}}</td></tr>
                <tr><td>List Price</td><td style="text-align:right;"><a href="javascript:addPriceForCart({{lst_price}});">{{formatCurrency lst_price}}</a></td></tr>
                <tr><td>Cash Sales Price</td><td style="text-align:right;"><a href="javascript:addPriceForCart({{minimum_cash_sales_price}});">{{formatCurrency minimum_cash_sales_price}}</a></td></tr>
                <tr><td>Export Sales Price</td><td style="text-align:right;"><a href="javascript:addPriceForCart({{export_sales_price}});">{{formatCurrency export_sales_price}}</a></td></tr>
                <tr><td>Minimum Sales Price</td><td style="text-align:right;"><a href="javascript:addPriceForCart({{minimum_sales_price}});">{{formatCurrency minimum_sales_price}}</a></td></tr>
                <tr><td>Special Sales Price</td><td style="text-align:right;"><a href="javascript:addPriceForCart({{special_sales_price}});">{{formatCurrency special_sales_price}}</a></td></tr>
                <tr><td>In Hand</td><td style="text-align:right;">{{qty_available}}</td></tr>
                <tr><td>Incoming/Outgoing</td><td style="text-align:right;">{{incoming_qty}}</td></tr>
                <tr><td>Future Quanitty</td><td style="text-align:right;">{{virtual_available}}</td></tr>
                <tr><td>A Quantity</td><td style="text-align:right;">{{stock_A_real}}</td></tr>
                <tr><td>B Quantity</td><td style="text-align:right;">{{stock_B_real}}</td></tr>
                <tr><td>C Quantity</td><td style="text-align:right;">{{stock_C_real}}</td></tr>
              </table>
            </div>
            <div class="col-md-6">
              <table class="table">
                <tr>
                  <td>Quantity</td><td><input id="tesaProductAddToCartQuantity" /></td>
                </tr>
                <tr>
                  <td>Price</td><td><input id="tesaProductAddToCartPrice" /></td>
                </tr>
                <tr>
                  <td>Tag</td><td><input id="tesaProductAddToCartTag" /></td>
                </tr>
                <tr>
                  <input type="hidden" id="tesaProductAddToCartCode" value="{{default_code}}" />
                  <input type="hidden" id="tesaProductAddToCartName" value="{{name}}" />
                  <td></td><td><a href="javascript:addToCart({{id}})" class="btn btn-default">Add to Cart</a></td>
                </tr>
              </table>
            </div>
          </div>
        </script>

        <script id="tesaProductSearchResultTableTemplate" type="text/x-handlebars-template">
          <table class="table table-condensed table-hover table-bordered tesaProductSearchResultTable">
            <thead>
              <tr>
                <th style="text-align:right;">#</th>
                <th>ID</th>
                <th>Name</th>
                <th>Brand</th>
                <th style="text-align:right;">Price</th>
                <th style="text-align:right;">CHS</th>
                <th style="text-align:right;">EXP</th>
                <th style="text-align:right;">MIN</th>
                <th style="text-align:right;">SNP</th>
                <th style="text-align:right;">HND</th>
                <th style="text-align:right;">INC</th>
                <th style="text-align:right;">FUT</th>
                <th style="text-align:right;">@A</th>
                <th style="text-align:right;">@B</th>
                <th style="text-align:right;">@C</th>
                <th style="text-align:right;"></th>
              </tr>
            </thead>
          </table>
        </script>

        <script id="tesaProductSearchResultBodyTemplate" type="text/x-handlebars-template">
          <thead>
            <tr class="bg-primary">
              <td colspan="16"  class="tesaProductSearchResultsHeader-{{searchcodehash}}">
                <div class="pull-right tesa-loading"><i class="fa fa-spinner fa-spin"></i></div>
                <h4>{{searchcode}}</h4>
              </td>
            </tr>
          </thead>
          <tbody class="tesaProductSearchResults-{{searchcodehash}}">
          </tbody>
        </script>

        <script id="tesaProductSearchResultTemplate" type="text/x-handlebars-template">
          {{#each items}}
          <tr id="product-{{id}}">
            <td style="text-align:right;" nowrap="nowrap">{{add1 @index}} <a href="javascript:tesaDisplayOEMS({{id}})"><i class="glyphicon glyphicon-chevron-right"></i></a></td>
              <td>{{default_code}}</td>
              <td><a href="/web?#id={{id}}&amp;view_type=form&amp;model=product.product&amp;action=135" target="_blank">{{name}}</a></td>
              <td>{{lookup brand 1}}</td>
              <td style="text-align:right;">{{formatCurrency lst_price}}</td>
              <td style="text-align:right;">{{formatCurrency minimum_cash_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency export_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency minimum_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency special_sales_price}}</td>
              <td style="text-align:right;" class="{{# if qty_available }}bg-success{{else}}bg-danger{{/if}}">{{qty_available}}</td>
              <td style="text-align:right;">{{incoming_qty}}</td>
              <td style="text-align:right;">{{virtual_available}}</td>
              <td style="text-align:right;">{{stock_A_real}}</td>
              <td style="text-align:right;">{{stock_B_real}}</td>
              <td style="text-align:right;">{{stock_C_real}}</td>
              <td style="text-align:right;"><a href="javascript:addToCartDialog({{id}})"><i class="glyphicon glyphicon-shopping-cart"></i></a></td>
          </tr>
          {{/each}}
        </script>

        <script id="tesaProductSearchResultRowTemplate" type="text/x-handlebars-template">
          {{#each items}}
          <tr id="product-oem-{{id}}" class="bg-warning product-oem-for-{{../id}}" style="border-right:2px solid black;border-left:2px solid black;{{#if @last}}border-bottom:2px solid black;{{/if}}">
            <td style="text-align:right;" nowrap="nowrap"><i class="glyphicon glyphicon-list"></i></td>
            <td>{{default_code}}</td>
            <td><a href="/web?#id={{id}}&amp;view_type=form&amp;model=product.product&amp;action=135" target="_blank">{{name}}</a></td>
            <td>{{lookup brand 1}}</td>
            <td style="text-align:right;">{{formatCurrency lst_price}}</td>
            <td style="text-align:right;">{{formatCurrency minimum_cash_sales_price}}</td>
            <td style="text-align:right;">{{formatCurrency export_sales_price}}</td>
            <td style="text-align:right;">{{formatCurrency minimum_sales_price}}</td>
            <td style="text-align:right;">{{formatCurrency special_sales_price}}</td>
            <td style="text-align:right;" class="{{# if qty_available }}bg-success{{else}}bg-danger{{/if}}">{{qty_available}}</td>
            <td style="text-align:right;">{{incoming_qty}}</td>
            <td style="text-align:right;">{{virtual_available}}</td>
            <td style="text-align:right;">{{stock_A_real}}</td>
            <td style="text-align:right;">{{stock_B_real}}</td>
            <td style="text-align:right;">{{stock_C_real}}</td>
            <td style="text-align:right;"><a href="javascript:addToCartDialog({{id}})"><i class="glyphicon glyphicon-shopping-cart"></i></a></td>
          </tr>
          {{/each}}
        </script>

        <script id="tesaProductSearchResultEmptyRowTemplate" type="text/x-handlebars-template">
          <tr class="bg-danger product-oem-for-{{id}}" style="border-right:2px solid black;border-left:2px solid black;border-bottom:2px solid black;">
            <td style="text-align:right;" nowrap="nowrap"><i class="glyphicon glyphicon-exclamation-sign"></i></td>
            <td colspan="15">No OEM.</td>
          </tr>
        </script>

      </xpath>
    </template>

  </data>
</openerp>
