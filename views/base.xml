<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <!-- CHANGE COMPANY HEADER -->
    <template id="external_layout_header" inherit_id="report.external_layout_header">
      <xpath expr="//div[@class='header']" position="replace">
        <div class="header">
          <div class="row">
            <div class="col-xs-3">
              <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 45px;"/>
            </div>
            <div class="col-xs-9 text-right" style="margin-top:20px;" t-field="company.rml_header1"/>
          </div>
        </div>
      </xpath>
    </template>

    <!-- CHANGE COMPANY FOOTER -->
    <template id="external_layout_footer" inherit_id="report.external_layout_footer">
      <xpath expr="//div[@class='footer']" position="replace">
        <div class="footer small">
          <div class="text-center" style="border-top: 1px solid black;">
            <div class="row">
              <div class="col-md-12">
                <ul t-if="not company.custom_footer" class="list-inline">
                  <li t-if="company.phone">Phone: <span t-field="company.phone"/></li>

                  <li t-if="company.fax and company.phone">&amp;bull;</li>
                  <li t-if="company.fax">Fax: <span t-field="company.fax"/></li>

                  <li t-if="company.email">&amp;bull;</li>
                  <li t-if="company.email">Email: <span t-field="company.email"/></li>

                  <li t-if="company.website">&amp;bull;</li>
                  <li t-if="company.website">Website: <span t-field="company.website"/></li>
                </ul>

                <t t-if="company.custom_footer">
                  <span t-raw="company.rml_footer"/>
                </t>

                <ul class="list-inline">
                  <li>Page:</li>
                  <li><span class="page"/></li>
                  <li>/</li>
                  <li><span class="topage"/></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </xpath>
    </template>

    <template id="web_layout" name="web_layout" inherit_id="web.webclient_bootstrap">
      <xpath expr="//t/div/table" position="after">

        <div id="tesaProductSearchDialog" class="modal fade">
          <div class="modal-dialog modal-lg" style="width:95%;min-width:900px;">
            <div class="modal-content">
              <div class="modal-header">
                <div class="row">
                  <div class="col-md-6">
                    <input type="text" class="form-control input-sm" id="teseProductSearchKeyword"/>
                  </div>
                  <div class="col-md-6">
                    <button id="tesaProductSearchButton">Search</button>
                  </div>
                </div>
              </div>
              <div class="modal-body" id="tesaProductSearchResultContainer"></div>
            </div><!-- /.modal-content -->
          </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->

        <script id="tesaProductSearchResultTemplate" type="text/x-handlebars-template">
          <table class="table table-condensed table-striped table-hover">
            <tr>
              <th>#</th>
              <th>ID</th>
              <th>Name</th>
              <th>Brand</th>
              <th style="text-align:right;">Price</th>
              <th style="text-align:right;">CHS</th>
              <th style="text-align:right;">EXP</th>
              <th style="text-align:right;">MIN</th>
              <th style="text-align:right;">SNP</th>
              <th style="text-align:right;">HND</th>
              <th style="text-align:right;">INC</th>
              <th style="text-align:right;">FUT</th>
              <th style="text-align:right;">@A</th>
              <th style="text-align:right;">@B</th>
              <th style="text-align:right;">@C</th>
            </tr>
            {{#each items}}
            <tr>
              <td>{{@index}}</td>
              <td>{{default_code}}</td>
              <td><a href="/web?#id={{id}}&amp;view_type=form&amp;model=product.product&amp;action=135" target="_blank">{{name}}</a></td>
              <td>{{lookup brand 1}}</td>
              <td style="text-align:right;">{{formatCurrency lst_price}}</td>
              <td style="text-align:right;">{{formatCurrency minimum_cash_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency export_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency minimum_sales_price}}</td>
              <td style="text-align:right;">{{formatCurrency special_sales_price}}</td>
              <td style="text-align:right;">{{qty_available}}</td>
              <td style="text-align:right;">{{incoming_qty}}</td>
              <td style="text-align:right;">{{virtual_available}}</td>
              <td style="text-align:right;">{{stock_A_real}}</td>
              <td style="text-align:right;">{{stock_B_real}}</td>
              <td style="text-align:right;">{{stock_C_real}}</td>
            </tr>
            {{/each}}
          </table>
        </script>

      </xpath>
    </template>

  </data>
</openerp>
