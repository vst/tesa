<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <!-- VIEW: SALE ORDER LINE -->
    <record id="tesa_view_order_line_tree" model="ir.ui.view">
      <field name="name">sale.order.line.tree.inherited</field>
      <field name="model">sale.order.line</field>
      <field name="inherit_id" ref="sale.view_order_line_tree"/>
      <field name="arch" type="xml">
        <!-- Change the position of the salesperson -->
        <field name="salesman_id" position="replace" />
        <field name="state" position="after">
          <field name="salesman_id" />
        </field>
        <!-- Add order date -->
        <field name="order_partner_id" position="before">
          <field name="date_order" />
        </field>
        <!-- Add unit price -->
        <field name="price_subtotal" position="before">
          <field name="currency_id" />
          <field name="price_unit" />
        </field>
      </field>
    </record>

    <!-- VIEW: SALE ORDER FORM -->
    <record id="view_res_sale_line_form1" model="ir.ui.view">
      <field name="name">sale.order.line.form.inherit</field>
      <field name="model">sale.order</field>
      <field name="type">form</field>
      <field name="priority" eval="8"/>
      <field name="inherit_id" ref="sale.view_order_form"/>
      <field name="arch" type="xml">
        <data>
          <!-- Add product buttons -->
          <xpath expr="//field[@name='product_id']" position="before">
            <button name="browse_product_id"  icon="STOCK_FIND" type="object"/>
          </xpath>
          <xpath expr="//tree/field[@name='product_id']" position="before">
            <button name="browse_product_id"  icon="STOCK_FIND" type="object"/>
          </xpath>

          <!-- Add salesman, delivery date and remarks from the old system -->
          <xpath expr="/form/sheet/notebook/page[@string='Other Information']" position="after">
            <page string="Extra Information">
              <group>
                <field name="xsalesman" />
                <field name="xdeliverydate" />
                <field name="xremarks" />
              </group>
            </page>
          </xpath>
        </data>
      </field>
    </record>

    <!-- VIEW: SALE QUOTATION TREE -->
    <record id="view_quotation_tree" model="ir.ui.view">
      <field name="name">sale.view.quotation.tree</field>
      <field name="model">sale.order</field>
      <field name="type">tree</field>
      <field name="priority" eval="8"/>
      <field name="inherit_id" ref="sale.view_quotation_tree"/>
      <field name="arch" type="xml">
        <data>
          <!-- Add currency -->
          <field name="amount_total" position="before">
            <field name="currency_id" />
          </field>
          <!-- Add warehouse -->
          <field name="state" position="after">
            <field name="warehouse_id" />
          </field>
        </data>
      </field>
    </record>

    <!-- VIEW: SALE ORDER TREE -->
    <record id="view_order_tree" model="ir.ui.view">
      <field name="name">sale.view.order.tree</field>
      <field name="model">sale.order</field>
      <field name="type">tree</field>
      <field name="priority" eval="8"/>
      <field name="inherit_id" ref="sale.view_order_tree"/>
      <field name="arch" type="xml">
        <data>
          <!-- Add currency -->
          <field name="amount_total" position="before">
            <field name="currency_id" />
          </field>
        </data>
      </field>
    </record>

  </data>
</openerp>
